<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>iPhone Call & Messages App</title>
    <style>
        /* APPLE NATIVE DESIGN SYSTEM */
        :root {
            --ios-blue: #007AFF;
            --ios-green: #30D158;
            --ios-red: #FF3B30;
            --ios-orange: #FF9500;
            --ios-yellow: #FFCC00;
            --ios-purple: #AF52DE;
            --ios-grey: #8E8E93;
            --ios-grey2: #AEAEB2;
            --ios-grey3: #C7C7CC;
            --ios-grey4: #D1D1D6;
            --ios-grey5: #E5E5EA;
            --ios-grey6: #F2F2F7;
            --ios-dark-bg: #000000;
            --ios-dark-surface: #1C1C1E;
            --ios-dark-surface2: #2C2C2E;
            --ios-dark-surface3: #3A3A3C;
            
            --spring-tension: 200;
            --spring-damping: 20;
            --spring-mass: 0.5;
            
            --transition-bounce: cubic-bezier(0.175, 0.885, 0.32, 1.275);
            --transition-smooth: cubic-bezier(0.4, 0, 0.2, 1);
            --transition-snappy: cubic-bezier(0.4, 0, 0.6, 1);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'SF Pro Display', 'Segoe UI', Roboto, Helvetica, Arial, sans-serif;
            background: var(--ios-dark-bg);
            color: white;
            overflow: hidden;
            user-select: none;
            -webkit-tap-highlight-color: transparent;
        }

        .iphone-container {
            width: 390px;
            height: 844px;
            margin: 20px auto;
            background: var(--ios-dark-bg);
            border-radius: 47px;
            overflow: hidden;
            position: relative;
            box-shadow: 0 20px 60px rgba(0,0,0,0.5);
            border: 2px solid #2a2a2a;
        }

        /* STATUS BAR */
        .status-bar {
            height: 47px;
            background: rgba(0,0,0,0.9);
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 0 27px;
            font-size: 15px;
            font-weight: 600;
            position: relative;
            z-index: 1000;
            backdrop-filter: blur(20px);
        }

        .status-icons {
            display: flex;
            gap: 7px;
            align-items: center;
        }

        /* SCREENS */
        .app-screen {
            height: calc(100% - 47px - 83px);
            position: relative;
            overflow: hidden;
        }

        .screen {
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            transition: transform 0.4s var(--transition-smooth);
            will-change: transform;
        }

        .screen.hidden {
            transform: translateX(100%);
        }

        /* TAB BAR - iOS STYLE */
        .tab-bar {
            position: absolute;
            bottom: 0;
            left: 0;
            right: 0;
            height: 83px;
            background: rgba(28, 28, 30, 0.95);
            backdrop-filter: blur(20px);
            display: flex;
            justify-content: space-around;
            align-items: center;
            border-top: 0.5px solid rgba(255,255,255,0.1);
            z-index: 1000;
        }

        .tab-button {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 4px;
            padding: 10px;
            color: rgba(255,255,255,0.6);
            cursor: pointer;
            transition: all 0.3s var(--transition-smooth);
            border: none;
            background: none;
            position: relative;
            transform: scale(1);
        }

        .tab-button:active {
            transform: scale(0.92);
        }

        .tab-button.active {
            color: var(--ios-blue);
            transform: scale(1.05);
        }

        .tab-icon {
            width: 24px;
            height: 24px;
            fill: currentColor;
            transition: transform 0.3s var(--transition-smooth);
        }

        .tab-label {
            font-size: 10px;
            font-weight: 500;
            letter-spacing: -0.2px;
        }

        /* CALL APP STYLES */
        .keypad-screen {
            background: var(--ios-dark-surface);
            padding: 20px;
            display: flex;
            flex-direction: column;
            height: 100%;
        }

        .number-display {
            font-size: 40px;
            text-align: center;
            padding: 30px 20px;
            min-height: 100px;
            display: flex;
            align-items: center;
            justify-content: center;
            word-break: break-all;
            background: var(--ios-dark-surface2);
            border-radius: 16px;
            margin-bottom: 30px;
            font-weight: 300;
            letter-spacing: 2px;
            transition: all 0.3s var(--transition-smooth);
        }

        .keypad {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 15px;
            max-width: 300px;
            margin: 0 auto 30px;
        }

        .key {
            width: 80px;
            height: 80px;
            border-radius: 50%;
            background: var(--ios-dark-surface2);
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.2s var(--transition-snappy);
            user-select: none;
            position: relative;
            overflow: hidden;
        }

        .key::before {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            width: 0;
            height: 0;
            background: rgba(255,255,255,0.1);
            border-radius: 50%;
            transform: translate(-50%, -50%);
            transition: width 0.3s, height 0.3s;
        }

        .key:active::before {
            width: 100%;
            height: 100%;
        }

        .key:active {
            transform: scale(0.92);
            background: var(--ios-dark-surface3);
        }

        .key-number {
            font-size: 32px;
            font-weight: 300;
            letter-spacing: -1px;
        }

        .key-letters {
            font-size: 12px;
            color: var(--ios-grey2);
            margin-top: 2px;
            letter-spacing: 0.5px;
        }

        .keypad-actions {
            display: flex;
            justify-content: center;
            gap: 40px;
            margin-top: auto;
        }

        .action-button {
            width: 60px;
            height: 60px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.2s var(--transition-bounce);
            border: none;
            position: relative;
            overflow: hidden;
        }

        .call-button {
            background: var(--ios-green);
            box-shadow: 0 4px 20px rgba(48, 209, 88, 0.3);
        }

        .call-button:active {
            transform: scale(0.9);
            box-shadow: 0 2px 10px rgba(48, 209, 88, 0.2);
        }

        .delete-button {
            background: var(--ios-dark-surface3);
        }

        .delete-button:active {
            transform: scale(0.9);
        }

        /* MESSAGES APP STYLES */
        .messages-screen {
            background: var(--ios-dark-surface);
            height: 100%;
            display: flex;
            flex-direction: column;
        }

        .messages-header {
            padding: 16px 20px;
            background: var(--ios-dark-surface2);
            border-bottom: 0.5px solid rgba(255,255,255,0.1);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .messages-title {
            font-size: 17px;
            font-weight: 600;
        }

        .messages-compose {
            color: var(--ios-blue);
            font-size: 15px;
            font-weight: 400;
            cursor: pointer;
            padding: 8px 12px;
            border-radius: 8px;
            transition: background 0.2s;
        }

        .messages-compose:hover {
            background: rgba(0, 122, 255, 0.1);
        }

        .messages-list {
            flex: 1;
            overflow-y: auto;
            padding: 8px 0;
        }

        .message-item {
            display: flex;
            align-items: center;
            padding: 12px 20px;
            cursor: pointer;
            transition: background 0.2s var(--transition-smooth);
            position: relative;
        }

        .message-item:hover {
            background: rgba(255,255,255,0.05);
        }

        .message-item:active {
            background: rgba(255,255,255,0.1);
        }

        .message-avatar {
            width: 48px;
            height: 48px;
            border-radius: 50%;
            background: var(--ios-blue);
            display: flex;
            align-items: center;
            justify-content: center;
            margin-right: 12px;
            font-weight: 600;
            font-size: 18px;
        }

        .message-content {
            flex: 1;
        }

        .message-name {
            font-size: 16px;
            font-weight: 600;
            margin-bottom: 2px;
        }

        .message-preview {
            font-size: 14px;
            color: var(--ios-grey2);
            overflow: hidden;
            text-overflow: ellipsis;
            white-space: nowrap;
        }

        .message-time {
            font-size: 13px;
            color: var(--ios-grey2);
            margin-left: 8px;
        }

        /* CHAT INTERFACE */
        .chat-screen {
            background: var(--ios-dark-surface);
            height: 100%;
            display: flex;
            flex-direction: column;
        }

        .chat-header {
            padding: 16px 20px;
            background: var(--ios-dark-surface2);
            border-bottom: 0.5px solid rgba(255,255,255,0.1);
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .chat-back {
            cursor: pointer;
            padding: 8px;
            border-radius: 8px;
            transition: background 0.2s;
        }

        .chat-back:hover {
            background: rgba(255,255,255,0.1);
        }

        .chat-contact-avatar {
            width: 36px;
            height: 36px;
            border-radius: 50%;
            background: var(--ios-blue);
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 600;
            font-size: 16px;
        }

        .chat-contact-info {
            flex: 1;
        }

        .chat-contact-name {
            font-size: 17px;
            font-weight: 600;
        }

        .chat-contact-status {
            font-size: 13px;
            color: var(--ios-grey2);
        }

        .chat-messages {
            flex: 1;
            overflow-y: auto;
            padding: 16px 20px;
            display: flex;
            flex-direction: column;
            gap: 12px;
        }

        .message-bubble {
            max-width: 75%;
            padding: 12px 16px;
            border-radius: 18px;
            position: relative;
            animation: messageAppear 0.4s var(--transition-bounce);
            transform-origin: bottom;
            word-wrap: break-word;
        }

        @keyframes messageAppear {
            from {
                opacity: 0;
                transform: scale(0.8) translateY(20px);
            }
            to {
                opacity: 1;
                transform: scale(1) translateY(0);
            }
        }

        .message-sent {
            align-self: flex-end;
            background: var(--ios-blue);
            color: white;
            border-bottom-right-radius: 4px;
            box-shadow: 0 2px 12px rgba(0, 122, 255, 0.3);
        }

        .message-received {
            align-self: flex-start;
            background: var(--ios-dark-surface2);
            color: white;
            border-bottom-left-radius: 4px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.2);
        }

        .message-meta {
            font-size: 11px;
            color: var(--ios-grey2);
            margin-top: 4px;
            opacity: 0;
            animation: fadeIn 0.3s 0.5s forwards;
        }

        @keyframes fadeIn {
            to { opacity: 1; }
        }

        .message-sent .message-meta {
            text-align: right;
        }

        /* CHAT INPUT */
        .chat-input-container {
            padding: 16px 20px;
            background: var(--ios-dark-surface2);
            border-top: 0.5px solid rgba(255,255,255,0.1);
            display: flex;
            align-items: flex-end;
            gap: 12px;
        }

        .chat-input-wrapper {
            flex: 1;
            background: var(--ios-dark-surface3);
            border-radius: 20px;
            padding: 8px 16px;
            display: flex;
            align-items: center;
            gap: 8px;
            min-height: 40px;
            max-height: 100px;
            transition: all 0.3s var(--transition-smooth);
        }

        .chat-input {
            flex: 1;
            background: none;
            border: none;
            color: white;
            font-size: 16px;
            font-family: inherit;
            resize: none;
            max-height: 80px;
            outline: none;
        }

        .chat-input::placeholder {
            color: var(--ios-grey2);
        }

        .input-button {
            width: 32px;
            height: 32px;
            border-radius: 50%;
            background: var(--ios-dark-surface2);
            border: none;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.2s var(--transition-smooth);
        }

        .input-button:hover {
            background: var(--ios-dark-surface);
            transform: scale(1.1);
        }

        .input-button:active {
            transform: scale(0.95);
        }

        .send-button {
            width: 36px;
            height: 36px;
            border-radius: 50%;
            background: var(--ios-blue);
            border: none;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.2s var(--transition-bounce);
            box-shadow: 0 2px 12px rgba(0, 122, 255, 0.3);
        }

        .send-button:hover {
            transform: scale(1.1);
            box-shadow: 0 4px 20px rgba(0, 122, 255, 0.4);
        }

        .send-button:active {
            transform: scale(0.95);
        }

        /* MESSAGES LIST */
        .messages-list {
            flex: 1;
            overflow-y: auto;
            padding: 8px 0;
        }

        .message-item {
            display: flex;
            align-items: center;
            padding: 12px 20px;
            cursor: pointer;
            transition: all 0.2s var(--transition-smooth);
            position: relative;
        }

        .message-item:hover {
            background: rgba(255,255,255,0.05);
            transform: translateX(4px);
        }

        .message-item:active {
            background: rgba(255,255,255,0.1);
            transform: translateX(0);
        }

        .message-avatar {
            width: 48px;
            height: 48px;
            border-radius: 50%;
            background: var(--ios-blue);
            display: flex;
            align-items: center;
            justify-content: center;
            margin-right: 12px;
            font-weight: 600;
            font-size: 18px;
            transition: transform 0.2s;
        }

        .message-item:hover .message-avatar {
            transform: scale(1.05);
        }

        .message-content {
            flex: 1;
        }

        .message-name {
            font-size: 16px;
            font-weight: 600;
            margin-bottom: 2px;
        }

        .message-preview {
            font-size: 14px;
            color: var(--ios-grey2);
            overflow: hidden;
            text-overflow: ellipsis;
            white-space: nowrap;
        }

        .message-time {
            font-size: 13px;
            color: var(--ios-grey2);
            margin-left: 8px;
        }

        /* CUSTOM MESSAGING INTERFACE */
        .custom-messages-screen {
            background: var(--ios-dark-surface);
            height: 100%;
            display: flex;
            flex-direction: column;
            padding: 20px;
        }

        .custom-header {
            text-align: center;
            margin-bottom: 30px;
        }

        .custom-header h2 {
            font-size: 28px;
            font-weight: 700;
            margin-bottom: 10px;
        }

        .custom-header p {
            color: var(--ios-grey2);
            font-size: 16px;
        }

        .custom-input-group {
            margin-bottom: 20px;
        }

        .custom-input-group label {
            display: block;
            font-size: 14px;
            font-weight: 600;
            margin-bottom: 8px;
            color: var(--ios-grey);
        }

        .custom-input {
            width: 100%;
            padding: 14px 18px;
            background: var(--ios-dark-surface2);
            border: 1px solid var(--ios-dark-surface3);
            border-radius: 12px;
            color: white;
            font-size: 16px;
            font-family: inherit;
            transition: all 0.2s var(--transition-smooth);
        }

        .custom-input:focus {
            outline: none;
            border-color: var(--ios-blue);
            background: var(--ios-dark-surface3);
            box-shadow: 0 0 0 3px rgba(0, 122, 255, 0.2);
        }

        .custom-textarea {
            min-height: 100px;
            resize: vertical;
        }

        .custom-button {
            width: 100%;
            padding: 16px;
            background: var(--ios-blue);
            border: none;
            border-radius: 12px;
            color: white;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.2s var(--transition-smooth);
            margin-top: 10px;
        }

        .custom-button:hover {
            background: #0051D5;
            transform: translateY(-1px);
            box-shadow: 0 4px 20px rgba(0, 122, 255, 0.3);
        }

        .custom-button:active {
            transform: translateY(0);
            box-shadow: 0 2px 10px rgba(0, 122, 255, 0.2);
        }

        /* ANIMATIONS */
        @keyframes slideInUp {
            from {
                transform: translateY(100%);
                opacity: 0;
            }
            to {
                transform: translateY(0);
                opacity: 1;
            }
        }

        @keyframes slideOutDown {
            from {
                transform: translateY(0);
                opacity: 1;
            }
            to {
                transform: translateY(100%);
                opacity: 0;
            }
        }

        @keyframes bounceIn {
            0% {
                transform: scale(0.3);
                opacity: 0;
            }
            50% {
                transform: scale(1.05);
            }
            70% {
                transform: scale(0.9);
            }
            100% {
                transform: scale(1);
                opacity: 1;
            }
        }

        /* HIDDEN STATE */
        .hidden {
            display: none !important;
        }

        /* RESPONSIVE */
        @media (max-width: 430px) {
            .iphone-container {
                width: 100%;
                height: 100vh;
                margin: 0;
                border-radius: 0;
            }
        }
    </style>
</head>
<body>
    <div class="iphone-container">
        <div class="status-bar">
            <div class="time" id="time">9:41</div>
            <div class="status-icons">
                <span>ðŸ“¶</span>
                <span>ðŸ”‹</span>
            </div>
        </div>

        <div class="app-screen">
            <!-- CALL APP SCREENS -->
            <div class="screen keypad-screen hidden" id="keypad">
                <div class="number-display" id="numberDisplay"></div>
                <div class="keypad">
                    <button class="key" data-number="1"><span class="key-number">1</span></button>
                    <button class="key" data-number="2"><span class="key-number">2</span><span class="key-letters">ABC</span></button>
                    <button class="key" data-number="3"><span class="key-number">3</span><span class="key-letters">DEF</span></button>
                    <button class="key" data-number="4"><span class="key-number">4</span><span class="key-letters">GHI</span></button>
                    <button class="key" data-number="5"><span class="key-number">5</span><span class="key-letters">JKL</span></button>
                    <button class="key" data-number="6"><span class="key-number">6</span><span class="key-letters">MNO</span></button>
                    <button class="key" data-number="7"><span class="key-number">7</span><span class="key-letters">PQRS</span></button>
                    <button class="key" data-number="8"><span class="key-number">8</span><span class="key-letters">TUV</span></button>
                    <button class="key" data-number="9"><span class="key-number">9</span><span class="key-letters">WXYZ</span></button>
                    <button class="key" data-number="*"><span class="key-number">*</span></button>
                    <button class="key" data-number="0"><span class="key-number">0</span><span class="key-letters">+</span></button>
                    <button class="key" data-number="#"><span class="key-number">#</span></button>
                </div>
                <div class="keypad-actions">
                    <button class="action-button call-button" id="callBtn">
                        <svg width="28" height="28" viewBox="0 0 24 24" fill="white">
                            <path d="M20.01 15.38c-1.23 0-2.42-.2-3.53-.56a.977.977 0 00-1.01.24l-1.57 1.97c-2.83-1.35-5.48-3.9-6.89-6.83l1.95-1.66c.27-.28.35-.67.24-1.02-.37-1.11-.56-2.3-.56-3.53 0-.54-.45-.99-.99-.99H4.19C3.65 3 3 3.24 3 3.99 3 13.28 10.73 21 20.01 21c.71 0 .99-.63.99-1.18v-3.45c0-.54-.45-.99-.99-.99z"/>
                        </svg>
                    </button>
                    <button class="action-button delete-button" id="deleteBtn">
                        <svg width="24" height="24" viewBox="0 0 24 24" fill="white">
                            <path d="M22 3H7c-.69 0-1.23.35-1.59.88L0 12l5.41 8.12c.36.53.9.88 1.59.88h15c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-3.7 14.3l-1.4 1.4L12 13.4l-4.9 4.9-1.4-1.4L10.6 12 5.7 7.1l1.4-1.4L12 10.6l4.9-4.9 1.4 1.4L13.4 12l4.9 4.9z"/>
                        </svg>
                    </button>
                </div>
            </div>

            <!-- MESSAGES APP SCREENS -->
            <div class="screen messages-screen" id="messages">
                <div class="messages-header">
                    <div class="messages-title">Messages</div>
                    <div class="messages-compose" onclick="showCustomMessages()">Compose</div>
                </div>
                <div class="messages-list" id="messagesList"></div>
            </div>

            <!-- CHAT INTERFACE -->
            <div class="screen chat-screen hidden" id="chat">
                <div class="chat-header">
                    <div class="chat-back" onclick="showScreen('messages')">
                        <svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor">
                            <path d="M15.41 7.41L14 6l-6 6 6 6 1.41-1.41L10.83 12z"/>
                        </svg>
                    </div>
                    <div class="chat-contact-avatar" id="chatAvatar">JD</div>
                    <div class="chat-contact-info">
                        <div class="chat-contact-name" id="chatName">John Doe</div>
                        <div class="chat-contact-status">iMessage</div>
                    </div>
                    <div class="chat-actions">
                        <svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor">
                            <path d="M12 8c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2zm0 2c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm0 6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2z"/>
                        </svg>
                    </div>
                </div>
                <div class="chat-messages" id="chatMessages"></div>
                <div class="chat-input-container">
                    <div class="chat-input-wrapper">
                        <button class="input-button" onclick="showEmojiPicker()">
                            <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
                                <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8zm-2-6c0 1.1.9 2 2 2s2-.9 2-2-.9-2-2-2-2 .9-2 2zm4-4c-.55 0-1 .45-1 1s.45 1 1 1 1-.45 1-1-.45-1-1-1zm-4 0c-.55 0-1 .45-1 1s.45 1 1 1 1-.45 1-1-.45-1-1-1z"/>
                            </svg>
                        </button>
                        <textarea class="chat-input" id="chatInput" placeholder="iMessage" rows="1"></textarea>
                    </div>
                    <button class="send-button" id="sendBtn">
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="white">
                            <path d="M2.01 21L23 12 2.01 3 2 10l15 2-15 2z"/>
                        </svg>
                    </button>
                </div>
            </div>

            <!-- CUSTOM MESSAGING COMPOSER -->
            <div class="screen custom-messages-screen hidden" id="customMessages">
                <div class="custom-header">
                    <h2>Create Custom Conversation</h2>
                    <p>Design your perfect messaging experience</p>
                </div>
                
                <div class="custom-input-group">
                    <label>Contact Name</label>
                    <input type="text" class="custom-input" id="contactNameInput" placeholder="Enter contact name">
                </div>
                
                <div class="custom-input-group">
                    <label>Your Name</label>
                    <input type="text" class="custom-input" id="yourNameInput" placeholder="Enter your name">
                </div>
                
                <div class="custom-input-group">
                    <label>Contact Phone</label>
                    <input type="tel" class="custom-input" id="contactPhoneInput" placeholder="Enter phone number">
                </div>
                
                <div class="custom-input-group">
                    <label>First Message</label>
                    <textarea class="custom-input custom-textarea" id="firstMessageInput" placeholder="Type your first message..."></textarea>
                </div>
                
                <button class="custom-button" onclick="createCustomConversation()">
                    Create Conversation
                </button>
                
                <button class="custom-button" onclick="showScreen('messages')" style="background: var(--ios-grey3); color: var(--ios-dark-bg);">
                    Back to Messages
                </button>
            </div>

            <!-- CALL SCREEN -->
            <div class="screen call-screen hidden" id="callScreen">
                <div class="caller-info">
                    <div class="caller-avatar" id="callerAvatar"></div>
                    <div class="caller-name" id="callerName"></div>
                    <div class="caller-number" id="callerNumber"></div>
                    <div class="call-status" id="callStatus">Calling...</div>
                </div>
                <div class="call-controls">
                    <button class="control-button" onclick="alert('Mute')">
                        <div class="control-icon"><svg viewBox="0 0 24 24"><path d="M12 14c1.66 0 3-1.34 3-3V5c0-1.66-1.34-3-3-3S9 3.34 9 5v6c0 1.66 1.34 3 3 3z"/></svg></div>
                        <span class="control-label">mute</span>
                    </button>
                    <button class="control-button" onclick="alert('Keypad')">
                        <div class="control-icon"><svg viewBox="0 0 24 24"><path d="M12 17.27L18.18 21l-1.64-7.03L22 9.24l-7.19-.61L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21z"/></svg></div>
                        <span class="control-label">keypad</span>
                    </button>
                    <button class="control-button" onclick="alert('Speaker')">
                        <div class="control-icon"><svg viewBox="0 0 24 24"><path d="M3 9v6h4l5 5V4L7 9H3z"/></svg></div>
                        <span class="control-label">speaker</span>
                    </button>
                    <button class="control-button" onclick="alert('Add Call')">
                        <div class="control-icon"><svg viewBox="0 0 24 24"><path d="M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z"/></svg></div>
                        <span class="control-label">add call</span>
                    </button>
                    <button class="control-button" onclick="alert('FaceTime')">
                        <div class="control-icon"><svg viewBox="0 0 24 24"><path d="M17 10.5V7c0-.55-.45-1-1-1H4c-.55 0-1 .45-1 1v10c0 .55.45 1 1 1h12c.55 0 1-.45 1-1v-3.5l4 4v-11l-4 4z"/></svg></div>
                        <span class="control-label">FaceTime</span>
                    </button>
                    <button class="control-button" onclick="alert('Contacts')">
                        <div class="control-icon"><svg viewBox="0 0 24 24"><path d="M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"/></svg></div>
                        <span class="control-label">contacts</span>
                    </button>
                    <button class="control-button end-call-button" onclick="endCall()">
                        <div class="control-icon"><svg viewBox="0 0 24 24" fill="white"><path d="M12 9c-1.6 0-3.15.25-4.6.72v3.1c0 .39-.23.74-.56.9-.98.49-1.87 1.12-2.66 1.85-.18.18-.43.28-.7.28-.4 0-.75-.16-1.01-.51L.41 13.34c-.18-.24-.29-.88 0-1.12.58-.87 1.28-1.66 2.07-2.35.51-.44 1.14-.77 1.82-.98.32-.1.65-.16.99-.16.42 0 .83.08 1.21.24 1.27.53 2.64.83 4.03.89V3.5c0-.83.67-1.5 1.5-1.5s1.5.67 1.5 1.5v4.5c0 .82-.67 1.5-1.5 1.5z"/></svg></div>
                        <span class="control-label">end call</span>
                    </button>
                </div>
            </div>
        </div>

        <!-- iOS STYLE TAB BAR -->
        <div class="tab-bar">
            <button class="tab-button active" data-screen="messages">
                <svg class="tab-icon" viewBox="0 0 24 24">
                    <path d="M20 2H4c-1.1 0-2 .9-2 2v18l4-4h14c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2zm0 14H6l-2 2V4h16v12z"/>
                </svg>
                <span class="tab-label">Messages</span>
            </button>
            <button class="tab-button" data-screen="keypad">
                <svg class="tab-icon" viewBox="0 0 24 24">
                    <path d="M6.62 10.79c1.44 2.83 3.76 5.14 6.59 6.59l2.2-2.2c.27-.27.67-.36 1.02-.24 1.12.37 2.33.56 3.56.56.55 0 1 .45 1 1v3.5c0 .55-.45 1-1 1-9.39 0-17-7.61-17-17 0-.55.45-1 1-1h3.5c.55 0 1 .45 1 1 0 1.23.19 2.44.56 3.56.12.35.03.75-.25 1.02l-2.2 2.2z"/>
                </svg>
                <span class="tab-label">Keypad</span>
            </button>
            <button class="tab-button" data-screen="custom">
                <svg class="tab-icon" viewBox="0 0 24 24">
                    <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8zm-1-13h2v6h-2zm0 8h2v2h-2z"/>
                </svg>
                <span class="tab-label">Custom</span>
            </button>
        </div>
    </div>

    <script>
        // APPLE NATIVE JAVASCRIPT WITH SMOOTH ANIMATIONS
        class iPhoneApp {
            constructor() {
                this.currentScreen = 'messages';
                this.currentNumber = '';
                this.contacts = [
                    { name: 'Sarah Johnson', phone: '(555) 234-5678', avatar: 'SJ', messages: [
                        { text: "Hey! Are you free for lunch today?", sent: false, time: "10:23 AM" },
                        { text: "Sure! What time works for you?", sent: true, time: "10:25 AM" },
                        { text: "How about 12:30? We could try that new place downtown", sent: false, time: "10:26 AM" },
                        { text: "Perfect! See you there ðŸ˜Š", sent: true, time: "10:28 AM" }
                    ]},
                    { name: 'Mike Chen', phone: '(555) 345-6789', avatar: 'MC', messages: [
                        { text: "Did you finish the project?", sent: false, time: "9:15 AM" },
                        { text: "Almost done! Just need to review the final details", sent: true, time: "9:20 AM" },
                        { text: "Great! Let me know when it's ready", sent: false, time: "9:22 AM" }
                    ]},
                    { name: 'Emma Wilson', phone: '(555) 456-7890', avatar: 'EW', messages: [
                        { text: "Happy Birthday! ðŸŽ‰", sent: false, time: "Yesterday" },
                        { text: "Thank you so much! ðŸŽ‚", sent: true, time: "Yesterday" }
                    ]}
                ];
                this.currentContact = null;
                this.customConversations = [];
                this.init();
            }

            init() {
                this.setupEventListeners();
                this.updateTime();
                this.loadMessagesList();
                this.showScreen('messages');
                setInterval(() => this.updateTime(), 1000);
            }

            setupEventListeners() {
                // Tab bar
                document.querySelectorAll('.tab-button').forEach(btn => {
                    btn.addEventListener('click', (e) => {
                        const screen = e.currentTarget.dataset.screen;
                        this.showScreen(screen);
                    });
                });

                // Keypad
                document.querySelectorAll('.key').forEach(key => {
                    key.addEventListener('click', (e) => {
                        const number = e.currentTarget.dataset.number;
                        this.addNumber(number);
                    });
                });

                document.getElementById('callBtn').addEventListener('click', () => this.makeCall());
                document.getElementById('deleteBtn').addEventListener('click', () => this.deleteNumber());

                // Messages
                document.getElementById('sendBtn').addEventListener('click', () => this.sendMessage());
                document.getElementById('chatInput').addEventListener('keypress', (e) => {
                    if (e.key === 'Enter' && !e.shiftKey) {
                        e.preventDefault();
                        this.sendMessage();
                    }
                });

                // Custom messages
                document.getElementById('showAddContactBtn')?.addEventListener('click', () => {
                    document.getElementById('addContactForm').classList.toggle('hidden');
                });
            }

            updateTime() {
                const now = new Date();
                const time = now.toLocaleTimeString('en-US', { 
                    hour: 'numeric', 
                    minute: '2-digit',
                    hour12: true 
                });
                document.getElementById('time').textContent = time;
            }

            showScreen(screen) {
                // Hide all screens
                document.querySelectorAll('.screen').forEach(s => {
                    s.classList.add('hidden');
                });

                // Show target screen with animation
                const targetScreen = document.getElementById(screen);
                if (targetScreen) {
                    targetScreen.classList.remove('hidden');
                    
                    // Add entrance animation
                    targetScreen.style.animation = 'slideInUp 0.4s cubic-bezier(0.4, 0, 0.2, 1) forwards';
                    
                    setTimeout(() => {
                        targetScreen.style.animation = '';
                    }, 400);
                }

                // Update tab bar
                document.querySelectorAll('.tab-button').forEach(btn => {
                    btn.classList.remove('active');
                });
                
                const activeTab = document.querySelector(`[data-screen="${screen}"]`);
                if (activeTab) {
                    activeTab.classList.add('active');
                }

                // Load content based on screen
                if (screen === 'messages') {
                    this.loadMessagesList();
                } else if (screen === 'custom') {
                    this.showCustomMessages();
                }

                this.currentScreen = screen;
            }

            // CALL APP FUNCTIONS
            addNumber(num) {
                this.currentNumber += num;
                const display = document.getElementById('numberDisplay');
                display.textContent = this.formatPhoneNumber(this.currentNumber);
                
                // Add haptic feedback effect
                display.style.transform = 'scale(1.05)';
                setTimeout(() => {
                    display.style.transform = 'scale(1)';
                }, 100);
            }

            deleteNumber() {
                this.currentNumber = this.currentNumber.slice(0, -1);
                document.getElementById('numberDisplay').textContent = this.formatPhoneNumber(this.currentNumber);
            }

            formatPhoneNumber(number) {
                const cleaned = number.replace(/\D/g, '');
                const match = cleaned.match(/^(\d{0,3})(\d{0,3})(\d{0,4})$/);
                if (match) {
                    return `(${match[1]}${match[2] ? ') ' : ''}${match[2]}${match[3] ? '-' : ''}${match[3]}`;
                }
                return number;
            }

            makeCall() {
                if (this.currentNumber.length === 0) return;

                const contact = this.contacts.find(c => 
                    c.phone.replace(/\D/g, '') === this.currentNumber.replace(/\D/g, '')
                );

                document.getElementById('keypad').classList.add('hidden');
                document.getElementById('callScreen').classList.remove('hidden');
                
                if (contact) {
                    document.getElementById('callerName').textContent = contact.name;
                    document.getElementById('callerAvatar').textContent = contact.avatar;
                } else {
                    document.getElementById('callerName').textContent = this.currentNumber;
                    document.getElementById('callerAvatar').textContent = this.currentNumber.slice(-2);
                }
                
                document.getElementById('callerNumber').textContent = this.currentNumber;
                
                // Animate call screen appearance
                const callScreen = document.getElementById('callScreen');
                callScreen.style.animation = 'bounceIn 0.5s cubic-bezier(0.175, 0.885, 0.32, 1.275) forwards';
                
                // Simulate call connection
                setTimeout(() => {
                    document.getElementById('callStatus').textContent = 'Ringing...';
                }, 1000);
                
                setTimeout(() => {
                    document.getElementById('callStatus').textContent = '00:15';
                    this.startCallTimer();
                }, 3000);
            }

            startCallTimer() {
                let seconds = 15;
                const timer = setInterval(() => {
                    seconds++;
                    const minutes = Math.floor(seconds / 60);
                    const secs = seconds % 60;
                    document.getElementById('callStatus').textContent = 
                        `${minutes.toString().padStart(2, '0')}:${secs.toString().padStart(2, '0')}`;
                }, 1000);
                
                // Store timer reference for cleanup
                this.callTimer = timer;
            }

            endCall() {
                if (this.callTimer) {
                    clearInterval(this.callTimer);
                    this.callTimer = null;
                }
                
                document.getElementById('callScreen').classList.add('hidden');
                document.getElementById('keypad').classList.remove('hidden');
                this.currentNumber = '';
                document.getElementById('numberDisplay').textContent = '';
            }

            // MESSAGES APP FUNCTIONS
            loadMessagesList() {
                const list = document.getElementById('messagesList');
                list.innerHTML = '';
                
                this.contacts.forEach(contact => {
                    const item = document.createElement('div');
                    item.className = 'message-item';
                    item.onclick = () => this.openChat(contact);
                    
                    const lastMessage = contact.messages[contact.messages.length - 1];
                    const preview = lastMessage.sent ? 'You: ' + lastMessage.text : lastMessage.text;
                    
                    item.innerHTML = `
                        <div class="message-avatar">${contact.avatar}</div>
                        <div class="message-content">
                            <div class="message-name">${contact.name}</div>
                            <div class="message-preview">${preview}</div>
                        </div>
                        <div class="message-time">${lastMessage.time}</div>
                    `;
                    
                    list.appendChild(item);
                });
            }

            openChat(contact) {
                this.currentContact = contact;
                
                // Update chat header
                document.getElementById('chatAvatar').textContent = contact.avatar;
                document.getElementById('chatName').textContent = contact.name;
                
                // Load messages
                this.loadChatMessages();
                
                // Show chat screen
                this.showScreen('chat');
                
                // Focus input
                setTimeout(() => {
                    document.getElementById('chatInput').focus();
                }, 400);
            }

            loadChatMessages() {
                const container = document.getElementById('chatMessages');
                container.innerHTML = '';
                
                this.currentContact.messages.forEach((message, index) => {
                    const bubble = document.createElement('div');
                    bubble.className = `message-bubble ${message.sent ? 'message-sent' : 'message-received'}`;
                    bubble.innerHTML = `
                        <div>${message.text}</div>
                        <div class="message-meta">${message.time}</div>
                    `;
                    
                    // Stagger animation
                    bubble.style.animationDelay = `${index * 0.1}s`;
                    container.appendChild(bubble);
                });
                
                // Scroll to bottom
                container.scrollTop = container.scrollHeight;
            }

            sendMessage() {
                const input = document.getElementById('chatInput');
                const text = input.value.trim();
                
                if (!text) return;
                
                const now = new Date();
                const time = now.toLocaleTimeString('en-US', { 
                    hour: 'numeric', 
                    minute: '2-digit',
                    hour12: true 
                });
                
                // Add message to contact
                this.currentContact.messages.push({
                    text: text,
                    sent: true,
                    time: time
                });
                
                // Create message bubble
                const bubble = document.createElement('div');
                bubble.className = 'message-bubble message-sent';
                bubble.innerHTML = `
                    <div>${text}</div>
                    <div class="message-meta">${time}</div>
                `;
                
                const container = document.getElementById('chatMessages');
                container.appendChild(bubble);
                
                // Clear input
                input.value = '';
                input.style.height = 'auto';
                
                // Scroll to bottom with smooth animation
                bubble.scrollIntoView({ behavior: 'smooth', block: 'end' });
                
                // Update messages list
                this.loadMessagesList();
                
                // Simulate typing indicator
                this.simulateTyping();
            }

            simulateTyping() {
                setTimeout(() => {
                    const container = document.getElementById('chatMessages');
                    const typing = document.createElement('div');
                    typing.className = 'message-bubble message-received';
                    typing.id = 'typing';
                    typing.innerHTML = `
                        <div class="typing-indicator">
                            <span class="typing-dot"></span>
                            <span class="typing-dot"></span>
                            <span class="typing-dot"></span>
                        </div>
                    `;
                    container.appendChild(typing);
                    container.scrollTop = container.scrollHeight;
                    
                    // Remove typing and add response
                    setTimeout(() => {
                        typing.remove();
                        
                        const responses = [
                            "That's great to hear!",
                            "I'm doing well, thanks!",
                            "Sounds good to me!",
                            "Perfect! Let's do it!",
                            "Awesome! Can't wait!"
                        ];
                        
                        const response = responses[Math.floor(Math.random() * responses.length)];
                        const now = new Date();
                        const time = now.toLocaleTimeString('en-US', { 
                            hour: 'numeric', 
                            minute: '2-digit',
                            hour12: true 
                        });
                        
                        const responseBubble = document.createElement('div');
                        responseBubble.className = 'message-bubble message-received';
                        responseBubble.innerHTML = `
                            <div>${response}</div>
                            <div class="message-meta">${time}</div>
                        `;
                        
                        container.appendChild(responseBubble);
                        container.scrollTop = container.scrollHeight;
                        
                        // Update messages list
                        this.currentContact.messages.push({
                            text: response,
                            sent: false,
                            time: time
                        });
                        this.loadMessagesList();
                    }, 2000);
                }, 1000);
            }

            showCustomMessages() {
                this.showScreen('custom');
            }

            createCustomConversation() {
                const name = document.getElementById('contactNameInput').value;
                const yourName = document.getElementById('yourNameInput').value;
                const phone = document.getElementById('contactPhoneInput').value;
                const firstMessage = document.getElementById('firstMessageInput').value;

                if (!name || !yourName || !phone || !firstMessage) {
                    alert('Please fill in all fields');
                    return;
                }

                // Create new contact
                const avatar = name.split(' ').map(n => n[0]).join('').toUpperCase();
                const newContact = {
                    name: name,
                    phone: phone,
                    avatar: avatar,
                    messages: [
                        { text: firstMessage, sent: false, time: "Just now" }
                    ]
                };

                this.contacts.push(newContact);
                
                // Open chat with new contact
                this.openChat(newContact);
                
                // Clear form
                document.getElementById('contactNameInput').value = '';
                document.getElementById('yourNameInput').value = '';
                document.getElementById('contactPhoneInput').value = '';
                document.getElementById('firstMessageInput').value = '';
            }

            showEmojiPicker() {
                // Simple emoji insertion
                const emojis = ['ðŸ˜Š', 'ðŸ˜‚', 'â¤ï¸', 'ðŸ‘', 'ðŸŽ‰', 'ðŸ”¥', 'ðŸ’¯', 'ðŸ™Œ'];
                const emoji = emojis[Math.floor(Math.random() * emojis.length)];
                const input = document.getElementById('chatInput');
                input.value += emoji;
                input.focus();
            }
        }

        // Initialize the app
        const app = new iPhoneApp();
    </script>
</body>
</html>
